<div>
    <div class="row">
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-success-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M34.0396 20.974C36.6552 20.6065 38.6689 18.364 38.6746 15.6471C38.6746 12.9696 36.7227 10.7496 34.1633 10.3296" stroke="#FF5E5E"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path d="M37.4912 27.262C40.0243 27.6407 41.7925 28.5276 41.7925 30.3557C41.7925 31.6139 40.96 32.4314 39.6137 32.9451" stroke="#FF5E5E"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.7879 28.0373C16.7616 28.0373 11.6147 28.9504 11.6147 32.5973C11.6147 36.2423 16.7297 37.1817 22.7879 37.1817C28.8141 37.1817 33.9591 36.2779 33.9591 32.6292C33.9591 28.9804 28.846 28.0373 22.7879 28.0373Z"
                                    stroke="#FF5E5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.7876 22.8325C26.742 22.8325 29.9483 19.6281 29.9483 15.6719C29.9483 11.7175 26.742 8.51123 22.7876 8.51123C18.8333 8.51123 15.627 11.7175 15.627 15.6719C15.612 19.6131 18.7939 22.8194 22.7351 22.8325H22.7876Z"
                                    stroke="#FF5E5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path d="M11.5344 20.974C8.91691 20.6065 6.90504 18.364 6.89941 15.6471C6.89941 12.9696 8.85129 10.7496 11.4107 10.3296" stroke="#FF5E5E"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path d="M8.0825 27.262C5.54937 27.6407 3.78125 28.5276 3.78125 30.3557C3.78125 31.6139 4.61375 32.4314 5.96 32.9451" stroke="#FF5E5E"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-success count">{{ $stats['usersCount'] }}</h3>
                            <span>Total Users</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-primary-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.9715 29.3168C15.7197 29.3168 9.52686 30.4132 9.52686 34.8043C9.52686 39.1953 15.6804 40.331 22.9715 40.331C30.2233 40.331 36.4144 39.2328 36.4144 34.8435C36.4144 30.4543 30.2626 29.3168 22.9715 29.3168Z"
                                    stroke="#0d6efd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.9714 23.0537C27.7304 23.0537 31.5875 19.1948 31.5875 14.4359C31.5875 9.67694 27.7304 5.81979 22.9714 5.81979C18.2125 5.81979 14.3536 9.67694 14.3536 14.4359C14.3375 19.1787 18.1696 23.0377 22.9107 23.0537H22.9714Z"
                                    stroke="#0d6efd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="total-projects ms-3 text-right">
                            <h3 class="text-blue count">{{ $stats['organizersCount'] }}</h3>
                            <span>Total Organizers</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-info-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.9715 29.3168C15.7197 29.3168 9.52686 30.4132 9.52686 34.8043C9.52686 39.1953 15.6804 40.331 22.9715 40.331C30.2233 40.331 36.4144 39.2328 36.4144 34.8435C36.4144 30.4543 30.2626 29.3168 22.9715 29.3168Z"
                                    stroke="#3AC977" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.9714 23.0537C27.7304 23.0537 31.5875 19.1948 31.5875 14.4359C31.5875 9.67694 27.7304 5.81979 22.9714 5.81979C18.2125 5.81979 14.3536 9.67694 14.3536 14.4359C14.3375 19.1787 18.1696 23.0377 22.9107 23.0537H22.9714Z"
                                    stroke="#3AC977" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-info count">{{ $stats['contestantsCount'] }}</h3>
                            <span>Total Contestants</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-danger-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.9715 29.3168C15.7197 29.3168 9.52686 30.4132 9.52686 34.8043C9.52686 39.1953 15.6804 40.331 22.9715 40.331C30.2233 40.331 36.4144 39.2328 36.4144 34.8435C36.4144 30.4543 30.2626 29.3168 22.9715 29.3168Z"
                                    stroke="#c93a3a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M22.9714 23.0537C27.7304 23.0537 31.5875 19.1948 31.5875 14.4359C31.5875 9.67694 27.7304 5.81979 22.9714 5.81979C18.2125 5.81979 14.3536 9.67694 14.3536 14.4359C14.3375 19.1787 18.1696 23.0377 22.9107 23.0537H22.9714Z"
                                    stroke="#c93a3a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-danger count">{{ $stats['votersCount'] }}</h3>
                            <span>Total Voters</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4  col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-primary-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M34 8H12C10.9 8 10 8.9 10 10V36C10 37.1 10.9 38 12 38H34C35.1 38 36 37.1 36 36V10C36 8.9 35.1 8 34 8ZM12 4H34C37.31 4 40 6.69 40 10V36C40 39.31 37.31 42 34 42H12C8.69 42 6 39.31 6 36V10C6 6.69 8.69 4 12 4ZM20 24L16 20L17.41 18.59L20 21.17L28.59 12.59L30 14L20 24Z"
                                    fill="var(--primary)" />
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-primary count">{{ $stats['contestsCount'] }}</h3>
                            <span>Total Contests</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4  col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-warning-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M34 8H12C10.9 8 10 8.9 10 10V36C10 37.1 10.9 38 12 38H34C35.1 38 36 37.1 36 36V10C36 8.9 35.1 8 34 8ZM12 4H34C37.31 4 40 6.69 40 10V36C40 39.31 37.31 42 34 42H12C8.69 42 6 39.31 6 36V10C6 6.69 8.69 4 12 4ZM20 24L16 20L17.41 18.59L20 21.17L28.59 12.59L30 14L20 24Z"
                                    fill="var(--primary)" />
                            </svg>

                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-warning count">{{ $stats['pendingContests'] }}</h3>
                            <span>Pending Contests</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4  col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-purple-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M23 4C24.1 4 25 4.9 25 6V22.17L29.59 17.59L31 19L23 27L15 19L16.41 17.59L21 22.17V6C21 4.9 21.9 4 23 4ZM8 30H38V36C38 37.1 37.1 38 36 38H10C8.9 38 8 37.1 8 36V30ZM6 26C6 24.9 6.9 24 8 24H38C39.1 24 40 24.9 40 26V36C40 39.31 37.31 42 34 42H12C8.69 42 6 39.31 6 36V26Z"
                                    fill="var(--primary)" />
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-purple count">{{ format_price($stats['coinDeposit']) }}</h3>
                            <span>Total Deposits</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-success-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M23 42C21.9 42 21 41.1 21 40V23.83L16.41 28.41L15 27L23 19L31 27L29.59 28.41L25 23.83V40C25 41.1 24.1 42 23 42ZM8 16H38V10C38 8.9 37.1 8 36 8H10C8.9 8 8 8.9 8 10V16ZM6 20C6 21.1 6.9 22 8 22H38C39.1 22 40 21.1 40 20V10C40 6.69 37.31 4 34 4H12C8.69 4 6 6.69 6 10V20Z"
                                    fill="#3AC977" />
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-success count">{{ format_price($stats['withdrawals']) }}</h3>
                            <span>Total Withdrawals</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4  col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-warning-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M23 42C21.9 42 21 41.1 21 40V23.83L16.41 28.41L15 27L23 19L31 27L29.59 28.41L25 23.83V40C25 41.1 24.1 42 23 42ZM8 16H38V10C38 8.9 37.1 8 36 8H10C8.9 8 8 8.9 8 10V16ZM6 20C6 21.1 6.9 22 8 22H38C39.1 22 40 21.1 40 20V10C40 6.69 37.31 4 34 4H12C8.69 4 6 6.69 6 10V20Z"
                                    fill="#FF5E5E" />
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-warning count">{{ format_price($stats['pendingWithdrawals']) }}</h3>
                            <span>Pending Withdrawals</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-primary-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M8 6C6.9 6 6 6.9 6 8V38C6 39.1 6.9 40 8 40H38C39.1 40 40 39.1 40 38V8C40 6.9 39.1 6 38 6H8ZM14 12H32V16H14V12ZM14 20H32V24H14V20ZM14 28H24V32H14V28Z"
                                    fill="#3AC977" />
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-primary count">{{ $stats['postCount'] }}</h3>
                            <span>Total Posts</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-success-light rounded-circle">

                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M8 6C6.9 6 6 6.9 6 8V34C6 35.1 6.9 36 8 36H12V42L22 36H38C39.1 36 40 35.1 40 34V8C40 6.9 39.1 6 38 6H8ZM12 16H32V20H12V16ZM12 24H24V28H12V24ZM12 10H36V14H12V10Z"
                                    fill="var(--primary)" />
                            </svg>

                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-success count">{{ $stats['commentCount'] }}</h3>
                            <span>Total Comments</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="icon-box icon-box-lg bg-secondary-light rounded-circle">
                            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M23 6L8 24H18V38H28V24H38L23 6Z" fill="#3AC977" />
                            </svg>
                        </div>
                        <div class="total-projects ms-3">
                            <h3 class="text-secondary count">{{ $stats['votesCount'] }}</h3>
                            <span>Total Votes</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xl-6 col-xxl-12">
            <div class="card overflow-hidden">
                <div class="card-header border-0 pb-0 flex-wrap">
                    <h3 class="mb-0">Voting History</h3>
                    <ul class="nav nav-pills mix-chart-tab" id="pills-tab3" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link chart-tab active" data-bs-toggle="pill" type="button" data-period="weekly">Weekly</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link chart-tab nav-link" data-period="monthly" data-bs-toggle="pill" type="button">Monthly</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link chart-tab" data-period="yearly" data-bs-toggle="pill" type="button">Yearly</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link chart-tab" data-period="all" data-bs-toggle="pill" type="button">All-time</button>
                        </li>
                    </ul>
                </div>
                <div class="card-body custome-tooltip p-0">
                    <div id="votingChart"></div>
                    <div class="ttl-project">
                        <div class="pr-data">
                            <h5>{{ $voteData['count'] }}</h5>
                            <span>Total Votes</span>
                        </div>
                        <div class="pr-data">
                            <h5 class="text-primary">{{ $voteData['today'] }}</h5>
                            <span>Today Votes</span>
                        </div>
                        <div class="pr-data">
                            <h5>{{ format_price($voteData['amount']) }}</h5>
                            <span>Income</span>
                        </div>
                        <div class="pr-data">
                            <h5>{{ $voteData['coins'] }}</h5>
                            <span>Coins</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-6 col-xxl-12">
            <div class="card overflow-hidden">
                <div class="card-header border-0 pb-0 flex-wrap">
                    <h3 class="mb-0">Revenues</h3>
                    <ul class="nav nav-pills mix-chart-tab" id="pills-tab6" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link r-chart-tab active" data-bs-toggle="pill" type="button" data-period="weekly">Weekly</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link r-chart-tab" data-bs-toggle="pill" type="button" data-period="monthly">Monthly</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link r-chart-tab" data-period="yearly" data-bs-toggle="pill" type="button">Yearly</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link r-chart-tab" data-period="all" data-bs-toggle="pill" type="button">All</button>
                        </li>
                    </ul>
                </div>
                <div class="card-body custome-tooltip p-0">
                    <div id="revenueChart"></div>
                </div>
            </div>
        </div>
    </div>
    {{-- contests --}}
    <div class="col-12">
        <div class="card">
            <div class="card-body p-0 active-projects">
                <div class="tbl-caption d-flex justify-content-between">
                    <h4 class="heading mb-0">Pending Contests </h4>
                    <a href="{{ route('admin.contest.index') }}" class="btn btn-primary btn-sm">View All</a>
                </div>
                <div class="table-responsive">
                    @if ($contests->count() > 0)
                        <table class="table responsive-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Image</th>
                                    <th>Featured</th>
                                    <th>Type</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($contests as $contest)
                                    <tr>
                                        <td data-label="@lang('Name')" class="max-td">
                                            <a href="{{ route('admin.contest.show', $contest->id) }}" class="d-inline-block text-truncate text-primary"
                                                style="max-width: 100%;">
                                                {{ Str::limit($contest->title, 50) }}
                                            </a>
                                        </td>
                                        <td data-label="@lang('Image')">
                                            <img src="{{ my_asset($contest->image) }}" class="table-img" alt="">
                                        </td>
                                        <td data-label="@lang('Featured')">
                                            @if ($contest->featured == 1)
                                                <i class="fa fa-check-circle text-success"></i>
                                            @else
                                                <i class="fa fa-cancel text-red"></i>
                                            @endif
                                        </td>
                                        <td data-label="@lang('Type')">
                                            @if ($contest->type == 'paid')
                                                <span class="badge bg-primary">paid</span>
                                            @else
                                                <span class="badge bg-secondary">free</span>
                                            @endif
                                        </td>
                                        <td data-label="@lang('Status')">
                                            {!! contestStatus($contest->status) !!}
                                        </td>
                                        <td data-label="@lang('Date')">{{ show_datetime($contest->created_at) }}</td>
                                        <td data-label="@lang('Actions')">
                                            <div class="dropdown">
                                                <button class="btn bg-light border border-primary btn-sm" data-bs-toggle="dropdown">
                                                    <i class="bi bi-three-dots-vertical"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="{{ route('admin.contest.show', $contest->id) }}">View</a></li>
                                                    <li><a class="dropdown-item" href="{{ route('admin.contest.participants', $contest->id) }}">Participants</a></li>
                                                    @if ($contest->status == 'pending')
                                                        <li><a class="dropdown-item approve-btn" href="javascript:void(0)"
                                                                data-url="{{ route('admin.contest.approve', $contest->id) }}">Approve</a></li>
                                                        <li><a class="dropdown-item reject-btn" href="javascript:void(0)"
                                                                data-url="{{ route('admin.contest.reject', $contest->id) }}">Reject</a></li>
                                                    @endif
                                                    <li><a class="dropdown-item" href="{{ route('admin.contest.votes', $contest->id) }}">Votes</a></li>
                                                    <li><a class="dropdown-item delete-contest" href="javascript:void(0)"
                                                            data-url="{{ route('admin.contest.delete', $contest->id) }}">Delete</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    @else
                        <span class="">
                            <p class="fw-bold text-center"> No contest Found</p>
                        </span>
                    @endif
                </div>
            </div>
        </div>
    </div>
    {{-- users --}}
    <div class="col-12">
        <div class="card">
            <div class="card-body p-0">
                <div class="table-responsive active-projects">
                    <div class="tbl-caption d-flex justify-content-between">
                        <h4 class="heading mb-0">Recent Users</h4>
                        <a href="{{ route('admin.users.index') }}" class="btn btn-sm btn-primary">View All</a>
                    </div>
                    <table class="table responsive-table">
                        <thead class="">
                            <tr>
                                <th scope="col">@lang('Name')</th>
                                <th scope="col">@lang('Email')</th>
                                <th scope="col">@lang('Role')</th>
                                <th scope="col">@lang('Email')</th>
                                <th scope="col">@lang('Joined')</th>
                                <th scope="col">@lang('Status')</th>
                                <th scope="col">@lang('Action')</th>
                            </tr>
                        </thead>
                        <tbody>
                            @forelse($users as $item)
                                <tr>
                                    <td data-label="@lang('Name')">
                                        <span class="fw-bold">{{ $item->full_name }}</span>
                                        <br>
                                        <span class="small">
                                            <a href="{{ route('admin.users.view', $item->id) }}"><span>@</span>{{ $item->username }}</a>
                                        </span>
                                    </td>
                                    <td data-label="@lang('Email')">
                                        {{ $item->email }}
                                    </td>
                                    <td data-label="@lang('Role')">
                                        <span class="badge bg-info">{{ $item->role }}</span>
                                    </td>
                                    <td data-label="@lang('Email')">
                                        @if ($item->email_verify)
                                            <i class="far fa-check-circle text-success"></i>
                                        @else
                                            <i class="far fa-circle-xmark text-danger"></i>
                                        @endif
                                    </td>
                                    <td data-label="@lang('Joined')">
                                        {{ $item->created_at->diffForHumans() }}
                                    </td>

                                    <td data-label="@lang('Status')">
                                        {!! getUserStatus($item->status) !!}
                                    </td>
                                    <td data-label="@lang('Action')">
                                        <a href="{{ route('admin.users.view', $item->id) }}" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip"
                                            title="@lang('View User')">
                                            <i class="far fa-eye"></i>
                                        </a>
                                    </td>
                                </tr>

                            @empty
                                <tr>
                                    <td colspan="100%" class="text-center">@lang('No Data Found')</td>
                                </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    {{-- Transactions --}}
    <div class="col-12">
        <div class="card  active-projects">
            <div class="tbl-caption d-flex justify-content-between">
                <h4 class="heading mb-0">Recent Tranactions</h4>
                <a href="{{ route('admin.coin.transactions') }}" class="btn btn-sm btn-primary">View All</a>
            </div>
            <div class="card-body table-responsive">
                <table class="table table-hover responsive-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>User</th>
                            <th>Amount</th>
                            <th>Coins</th>
                            <th>Service</th>
                            <th>Date</th>
                            <th>Message</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach ($transactions as $transaction)
                            <tr>
                                <td data-label="#">{{ $transaction->code }}</td>
                                <td data-label="@lang('User')">
                                    <span class="fw-bold">{{ $transaction->user->full_name ?? 'n/a' }}</span>
                                    <br> @<a href="{{ route('admin.users.view', $transaction->user_id) }}"
                                        class="text-primary">{{ $transaction->user->username ?? 'n/a' }}</a>
                                </td>
                                <td data-label="@lang('Amount')">{{ format_price($transaction->amount, 2) }}</td>
                                <td data-label="@lang('Coin')">{{ $transaction->coins }}</td>
                                <td data-label="@lang('Service')"><span class="badge badge-sm badge-info">{{ ucfirst($transaction->service) }}</span> </td>
                                <td data-label="@lang('Date')">{{ $transaction->created_at->format('Y-m-d H:i:s') }}</td>
                                <td data-label="@lang('Message')" style="text-overflow: hidden"> {{ $transaction->description }}</td>
                                <td data-label="@lang('Actions')">
                                    <a href="#" class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#trxDetail{{ $transaction->id }}">
                                        <i class="bi bi-eye"></i> View
                                    </a>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    @foreach ($transactions as $key => $item)
        <div class="modal fade" id="trxDetail{{ $item->id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header py-2">
                        <h4 class="modal-title" id="myModalLabel"> Transaction Details</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <p> Transaction ID : {{ $item->code }} </p>
                            <p class="col-6"> <b>New Bal:</b> {{ format_price($item->newbal) }} </p>
                            <p class="col-6"> <b>Old Bal :</b> {{ format_price($item->oldbal) }} </p>
                            <p class="col-6">Type :
                                @if ($item->type == 'credit')
                                    <span class="badge bg-success">credit</span>
                                @elseif ($item->type == 'debit')
                                    <span class="badge bg-danger">debit</span>
                                @endif
                            </p>
                            <p class="col-6">Service : <span class="badge bg-info p-1">{{ $item->service }} </span> </p>
                            <p class="col-sm-12"> Details : {{ $item->description }} </p>
                            <p class="col-sm-12"> API Response :
                            <div style="max-height: 250px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;" class="pt-2">
                                <pre>{{ json_encode($item->response, JSON_PRETTY_PRINT) }}</pre>
                            </div>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    @endforeach
</div>

@assets
    <script src="{{ static_asset('admin/vendors/apexchart/apexchart.js') }}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let votingData = {!! $votingChartData !!};

            const options = {
                chart: {
                    type: "area",
                    height: 350,
                    stacked: false,
                    toolbar: {
                        show: false
                    }
                },
                stroke: {
                    curve: 'smooth',
                    width: 3
                },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shade: 'light',
                        type: "vertical",
                        colorStops: [{
                                offset: 0,
                                color: '#007bff',
                                opacity: 0.4
                            },
                            {
                                offset: 100,
                                color: '#007bff',
                                opacity: 0.1
                            }
                        ]
                    }
                },
                series: [{
                    name: "Votes",
                    data: votingData.weekly.data
                }],
                xaxis: {
                    categories: votingData.weekly.categories,
                    labels: {
                        style: {
                            colors: '#888888',
                            fontSize: '13px'
                        }
                    }
                },
                yaxis: {
                    labels: {
                        style: {
                            colors: '#888888',
                            fontSize: '13px'
                        }
                    }
                },
                colors: ["var(--primary)", "#3AC977", "#FF5E5E"],
                markers: {
                    size: 5,
                    hover: {
                        size: 7
                    }
                },
                tooltip: {
                    shared: true,
                    intersect: false,
                    y: {
                        formatter: function(value) {
                            return value + " votes";
                        }
                    }
                },
                legend: {
                    fontSize: '13px',
                    fontFamily: 'Poppins',
                    labels: {
                        colors: '#888888'
                    }
                }
            };

            const chartElement = document.querySelector("#votingChart");
            if (!chartElement) return;

            const votingChart = new ApexCharts(chartElement, options);
            votingChart.render();

            function updateChart(period) {
                if (votingData[period]) {
                    votingChart.updateOptions({
                        xaxis: {
                            categories: votingData[period].categories
                        }
                    });
                    votingChart.updateSeries([{
                        name: "Votes",
                        data: votingData[period].data
                    }]);
                }
            }

            document.querySelectorAll(".chart-tab").forEach(tab => {
                tab.addEventListener("click", function() {
                    document.querySelectorAll(".chart-tab").forEach(t => t.classList.remove("active"));
                    this.classList.add("active");

                    const selectedPeriod = this.getAttribute("data-period");
                    if (selectedPeriod) updateChart(selectedPeriod);
                });
            });
        });
        // revenue Charts
        document.addEventListener("DOMContentLoaded", function() {
            let revenueData = {!! $revenueData !!};

            const options = {
                chart: {
                    type: "line",
                    height: 350,
                    stacked: false,
                    toolbar: {
                        show: false
                    }
                },
                stroke: {
                    width: [0, 3],
                    curve: 'smooth',
                },
                plotOptions: {
                    bar: {
                        columnWidth: '18%',
                        borderRadius: 6
                    }
                },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shade: 'light',
                        type: "vertical",
                        colorStops: [
                            [{
                                    offset: 0,
                                    color: 'var(--primary)',
                                    opacity: 1
                                },
                                {
                                    offset: 100,
                                    color: 'var(--primary)',
                                    opacity: 1
                                }
                            ],
                            [{
                                    offset: 0,
                                    color: '#3AC977',
                                    opacity: 1
                                },
                                {
                                    offset: 100,
                                    color: '#3AC977',
                                    opacity: 0.1
                                }
                            ]
                        ],
                        stops: [0, 100]
                    }
                },
                series: [{
                        name: "Deposit Count",
                        type: "column",
                        data: revenueData.weekly.data.count
                    },
                    {
                        name: "Total Revenue",
                        type: "area",
                        data: revenueData.weekly.data.sum
                    }
                ],
                xaxis: {
                    categories: revenueData.weekly.categories,
                    labels: {
                        style: {
                            colors: '#888888',
                            fontSize: '13px'
                        }
                    }
                },
                yaxis: [{
                        title: {
                            text: "Deposit Count"
                        },
                        labels: {
                            style: {
                                colors: '#888888',
                                fontSize: '13px'
                            }
                        }
                    },
                    {
                        opposite: true,
                        title: {
                            text: "Total Revenue"
                        },
                        labels: {
                            style: {
                                colors: '#888888',
                                fontSize: '13px'
                            }
                        }
                    }
                ],
                colors: ["var(--primary)", "#3AC977"],
                markers: {
                    size: 5,
                    hover: {
                        size: 7
                    }
                },
                tooltip: {
                    shared: true,
                    intersect: false,
                    y: {
                        formatter: function(value) {
                            return value.toLocaleString();
                        }
                    }
                },
                legend: {
                    fontSize: '13px',
                    fontFamily: 'Poppins',
                    labels: {
                        colors: '#888888'
                    }
                }
            };

            const chartElement = document.querySelector("#revenueChart");
            if (!chartElement) return;

            const revenueChart = new ApexCharts(chartElement, options);
            revenueChart.render();

            function updateChart(period) {
                if (revenueData[period]) {
                    revenueChart.updateOptions({
                        xaxis: {
                            categories: revenueData[period].categories
                        }
                    });
                    revenueChart.updateSeries([{
                            name: "Deposit Count",
                            data: revenueData[period].data.count
                        },
                        {
                            name: "Total Revenue",
                            data: revenueData[period].data.sum
                        }
                    ]);
                }
            }

            document.querySelectorAll(".r-chart-tab").forEach(tab => {
                tab.addEventListener("click", function() {
                    document.querySelectorAll(".r-chart-tab").forEach(t => t.classList.remove("active"));
                    this.classList.add("active");

                    const selectedPeriod = this.getAttribute("data-period");
                    if (selectedPeriod) updateChart(selectedPeriod);
                });
            });

        });
    </script>
@endassets
